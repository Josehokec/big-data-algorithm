# big-data-algorithm

### Reservoir Sampling

#### Question Description: 有一个无限的整数数据流，如何从中随机地抽取k个整数出来？

我们先考虑最简单的情况，k=1，即只需要随机抽取一个样本出来。抽样方法如下：

1.当第一个整数到达时，保存该整数
2.当第2个整数到达时，以1/2的概率使用该整数替换第1个整数，以1/2的概率丢弃改整数
3.当第i个整数到达时，以1/i的概率使用第i个整数替换被选中的整数，以1-1/i的概率丢弃第i个整数

假设数据流目前已经流出共n个整数，下面证明上述方法能保证每个元素被选中的概率是1/n
采用数学归纳法证明：

1.当n=1时，由于是第1个数，被选中的概率是100%，命题成立
2.假设当n=m(m>=1)时，命题成立，即前m个数，每一个被选中的概率是1/m
3.当n=m+1时，第m+1个数被选中的概率是1/(1+m) , 前m个数被选中的概率是(即前m个元素某一个被选中的概率* 没有被第m+1元素踢掉的概率):
1/m(1-1/(m+1))=1/(m+1) ，命题依然成立

于是对于所有的n={1,2,3,4...},结论都成立。
